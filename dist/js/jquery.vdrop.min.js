/*
 * Project: vDrop
 * Description: Select dropdown jQuery plug-in
 * Author: https://github.com/Wancieho
 * License: MIT
 * Version: 0.0.1
 * Dependancies: jquery-1.*
 * Date: 24/11/2016
 */
!function(t,e,s,i){"use strict";function n(e,s){this.$select=t(e),this.$clicker=null,this.$ul=null,this.settings=t.extend({},h,s),l.apply(this)}function l(){var e=this,n=""!==this.settings.theme&&this.settings.theme!==i?" "+this.settings.theme:"";this.$select.wrap('<div class="vDrop'+n+'"></div>').parent().append('<a href="#" class="vClicker"><span></span><div class="vArrow"></div></a><ul></ul>'),this.$clicker=this.$select.siblings("a"),this.$ul=this.$select.siblings("ul"),this.$clicker.on("click",function(i){i.preventDefault(),i.stopPropagation(),0===d.length&&t(s).on("click",function(){e.close()}),e.settings.allowMultiple||e.close(null,e.$select),e.$ul.find("li").length>0&&(t(this).hasClass("open")?e.close(e.$select):(t(this).addClass("open"),e.$ul.stop(!0).slideDown(e.settings.transitionSpeed)))}),0===d.length&&t(s).on("click",function(){e.close()}),d.push(this.$select),this.update()}function a(t){this.$select.find("option").removeAttr("selected").eq(t).attr("selected","selected"),console.debug(t),c.apply(this)}function c(){this.$clicker.find("span").text(this.$select.find("option:selected").text()),this.$ul.find("a").removeClass("selected"),this.$ul.children().eq(this.$select.find("option:selected").index()).children().addClass("selected")}var o="vDrop",h={transitionSpeed:150,allowMultiple:!0,theme:""},d=[];t.extend(n.prototype,{update:function(){var e=this;this.$ul.empty(),t.each(this.$select.find("option"),function(s,i){e.$ul.append('<li><a href="#" data-value="'+t(i).val()+'" data-index="'+s+'">'+t(i).text()+"</a></li>")}),0===this.$select.find("option[selected]").length&&this.$select.find("option").eq(0).attr("selected","selected"),this.$ul.find("a").on("click",function(s){s.preventDefault(),s.stopPropagation(),a.apply(e,[parseInt(t(this).attr("data-index"))])}),c.apply(e)},close:function(e,s){var n=this;e instanceof t?e.siblings(".vClicker").hasClass("open")&&(e.siblings(".vClicker").removeClass("open"),e.siblings("ul").stop(!0).slideUp(this.settings.transitionSpeed)):t.each(d,function(){s!==i&&this.attr("name")===s.attr("name")||n.close(this)})}}),t.fn[o]=function(e){return this.each(function(){if(t.data(this,"plugin_"+o))switch(e){case"update":t(this).data("plugin_"+o).update();break;case"close":t(this).data("plugin_"+o).close(t(this))}else t.data(this,"plugin_"+o,new n(this,e))})}}(jQuery,window,document);