/*
 * Project: vDrop
 * Description: Select dropdown jQuery plug-in
 * Author: https://github.com/Wancieho
 * License: MIT
 * Version: 0.0.1
 * Dependancies: jquery-1.*
 * Date: 24/11/2016
 */
!function(t,e,s,i){"use strict";function n(e,s){this.select=e,this.settings=t.extend({},d,s),l.apply(this),a.apply(this)}function l(){var e=this,n=""!==this.settings.theme&&this.settings.theme!==i?" "+this.settings.theme:"";t(this.select).wrap('<div class="vDrop'+n+'"></div>').parent().append('<a href="#" class="vClicker"></a><ul></ul>'),0===p.length&&t(s).on("click",function(){e.close()}),p.push(t(this.select)),this.update()}function a(){var e=this;t(this.select).siblings(".vClicker").on("click",function(s){s.preventDefault(),s.stopPropagation(),e.settings.allowMultiple||e.close(null,t(this).siblings("select")),t(this).hasClass("open")?e.close(e.select):t(this).addClass("open").siblings("ul").stop(!0).slideDown(e.settings.transitionSpeed)})}function c(){var e=this;t(this.select).siblings("ul").find("a").on("click",function(t){t.preventDefault(),t.stopPropagation(),o.apply(e,[this])}),t(this.select).siblings("ul").find("li").on("mouseover",function(){})}function o(e){t(e).closest("ul").slideUp(this.settings.transitionSpeed).find("a").removeClass("selected"),t(this.select).find("option").removeAttr("selected"),console.debug(t(e).attr("data-index")),t(this.select).find("option").eq(t(e).attr("data-index")).attr("selected","selected")}var h="vDrop",d={transitionSpeed:200,allowMultiple:!0,theme:""},p=[];t.extend(n.prototype,{update:function(){var e=this;t(this.select).siblings("ul").empty(),t.each(t(this.select).find("option"),function(s,i){t(e.select).siblings("ul").append('<li><a href="#" data-value="'+t(i).val()+'" data-index="'+s+'">'+t(i).text()+"</a></li>")}),c.apply(this),0===t(this.select).find("option[selected]").length&&t(this.select).find("option").eq(0).attr("selected","selected"),t(this.select).siblings("ul").children().eq(t(this.select).find("option:selected").index()).children().addClass("selected"),t(this.select).siblings(".vClicker").text(t(this.select).find("option:selected").text())},close:function(e,s){var n=this;e!==i&&null!==e?t(e).siblings(".vClicker").hasClass("open")&&t(e).siblings(".vClicker").removeClass("open").siblings("ul").stop(!0).slideUp(this.settings.transitionSpeed):t.each(p,function(){t(this).attr("name")!==t(s).attr("name")&&n.close(this)})}}),t.fn[h]=function(e){return this.each(function(){if(t.data(this,"plugin_"+h))switch(e){case"update":t(this).data("plugin_"+h).update();break;case"close":t(this).data("plugin_"+h).close(t(this))}else t.data(this,"plugin_"+h,new n(this,e))})}}(jQuery,window,document);